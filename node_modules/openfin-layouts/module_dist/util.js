"use strict";
/*tslint:disable:no-any*/
Object.defineProperty(exports, "__esModule", { value: true });
function exportClientFunction(clientP, func) {
    return async (...args) => {
        const client = await clientP;
        return func(client)(...args);
    };
}
exports.exportClientFunction = exportClientFunction;
async function createClientPromise(serviceIdentity, version, payload = {}) {
    await new Promise((resolve, reject) => {
        if (typeof fin === 'undefined') {
            reject('fin is not defined, This module is only intended for use in an OpenFin application.');
        }
        fin.desktop.main(() => resolve());
    });
    const client = await fin.desktop.Service.connect(Object.assign({}, serviceIdentity, { payload: Object.assign({}, payload, { version }) }));
    client.register('WARN', (payload) => console.warn(payload));
    return client;
}
exports.createClientPromise = createClientPromise;
