"use strict";
/*tslint:disable:no-any*/
Object.defineProperty(exports, "__esModule", { value: true });
const Mousetrap = require("mousetrap");
const util_1 = require("./util");
const VERSION = '0.0.1';
if (typeof fin === 'undefined') {
    throw new Error('fin is not defined, This module is only intended for use in an OpenFin application.');
}
const getId = (() => {
    let id;
    return () => {
        if (id) {
            return id;
        }
        const { uuid, name } = fin.desktop.Window.getCurrent();
        id = { uuid, name };
        return id;
    };
})();
const clientP = util_1.createClientPromise({ uuid: 'Layouts-Manager', name: 'Layouts-Manager' }, VERSION);
clientP.then(client => {
    Mousetrap.bind('mod+shift+u', () => {
        client.dispatch('undock', getId());
        console.log('Window un-docked via keyboard shortcut');
    });
});
exports.undock = util_1.exportClientFunction(clientP, (client) => async (identity = getId()) => {
    await client.dispatch('undock', identity);
});
exports.deregister = util_1.exportClientFunction(clientP, (client) => async (identity = getId()) => {
    await client.dispatch('deregister', identity);
});
